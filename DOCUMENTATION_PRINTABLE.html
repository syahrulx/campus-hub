<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CampusHub - System Documentation</title>
    <style>
        @page { size: A4; margin: 1cm; }
        @media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Arial, sans-serif; font-size: 9pt; line-height: 1.4; color: #333; padding: 15px; }
        h1 { font-size: 18pt; color: #dc2626; text-align: center; margin-bottom: 5px; }
        h2 { font-size: 11pt; color: #1e40af; border-bottom: 2px solid #1e40af; padding-bottom: 2px; margin: 12px 0 6px 0; }
        h3 { font-size: 9pt; color: #047857; margin: 8px 0 4px 0; }
        .subtitle { text-align: center; color: #666; font-size: 9pt; margin-bottom: 10px; }
        .grid { display: grid; gap: 10px; }
        .grid-2 { grid-template-columns: 1fr 1fr; }
        .grid-3 { grid-template-columns: 1fr 1fr 1fr; }
        .grid-4 { grid-template-columns: 1fr 1fr 1fr 1fr; }
        .box { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 4px; padding: 8px; }
        .box-blue { background: #eff6ff; border-color: #bfdbfe; }
        .box-green { background: #f0fdf4; border-color: #bbf7d0; }
        .box-yellow { background: #fefce8; border-color: #fef08a; }
        .box-pink { background: #fdf2f8; border-color: #fbcfe8; }
        .box-gray { background: #f9fafb; border-color: #e5e7eb; }
        .badge { display: inline-block; padding: 1px 6px; border-radius: 10px; font-size: 7pt; font-weight: bold; }
        .b-bean { background: #dbeafe; color: #1e40af; }
        .b-dao { background: #dcfce7; color: #166534; }
        .b-servlet { background: #fef3c7; color: #92400e; }
        .b-jsp { background: #fce7f3; color: #9d174d; }
        .b-util { background: #e5e7eb; color: #374151; }
        code { background: #1e293b; color: #e2e8f0; padding: 1px 4px; border-radius: 2px; font-size: 8pt; }
        .arrow { color: #6366f1; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; font-size: 8pt; }
        th, td { border: 1px solid #d1d5db; padding: 4px 6px; text-align: left; }
        th { background: #f1f5f9; font-weight: 600; }
        .center { text-align: center; }
        .flow-box { background: #f1f5f9; border: 1px solid #cbd5e1; padding: 6px 10px; border-radius: 4px; text-align: center; font-size: 8pt; }
        .flow-row { display: flex; align-items: center; justify-content: center; gap: 8px; margin: 6px 0; }
        .small { font-size: 7pt; color: #64748b; }
        ul { padding-left: 14px; }
        li { margin: 2px 0; }
    </style>
</head>
<body>
    <h1>üéì CampusHub System Documentation</h1>
    <p class="subtitle">Campus Marketplace Web Application | Java EE + JSP + Derby Database</p>

    <!-- Architecture Overview -->
    <h2>üìê System Architecture (MVC Pattern)</h2>
    <div class="flow-row">
        <div class="flow-box box-pink"><strong>Browser</strong><br><span class="small">User Request</span></div>
        <span class="arrow">‚Üí</span>
        <div class="flow-box box-yellow"><strong>Servlet</strong><br><span class="small">Controller</span></div>
        <span class="arrow">‚Üí</span>
        <div class="flow-box box-green"><strong>DAO</strong><br><span class="small">Data Access</span></div>
        <span class="arrow">‚Üí</span>
        <div class="flow-box box-gray"><strong>Database</strong><br><span class="small">Derby DB</span></div>
    </div>
    <div class="flow-row">
        <div class="flow-box box-pink"><strong>JSP View</strong><br><span class="small">HTML Response</span></div>
        <span class="arrow">‚Üê</span>
        <div class="flow-box box-yellow"><strong>Servlet</strong><br><span class="small">Set Attributes</span></div>
        <span class="arrow">‚Üê</span>
        <div class="flow-box box-blue"><strong>Bean</strong><br><span class="small">Data Model</span></div>
        <span class="arrow">‚Üê</span>
        <div class="flow-box box-green"><strong>DAO</strong><br><span class="small">Query Result</span></div>
    </div>

    <!-- Package Overview -->
    <h2>üì¶ Package Structure</h2>
    <div class="grid grid-4">
        <div class="box box-blue">
            <h3><span class="badge b-bean">BEAN</span> com.campushub.bean</h3>
            <p class="small">Data models (POJOs) representing database entities with getters/setters.</p>
            <ul>
                <li><strong>User</strong> - User account</li>
                <li><strong>Product</strong> - Product listing</li>
                <li><strong>Cart</strong> - Shopping cart</li>
                <li><strong>CartItem</strong> - Cart item</li>
            </ul>
        </div>
        <div class="box box-green">
            <h3><span class="badge b-dao">DAO</span> com.campushub.dao</h3>
            <p class="small">Database operations using JDBC. Each DAO handles one entity.</p>
            <ul>
                <li><strong>UserDao</strong> - Auth, profile</li>
                <li><strong>ProductDao</strong> - CRUD, search</li>
                <li><strong>CategoryDao</strong> - Categories</li>
                <li><strong>OrderDao</strong> - Orders</li>
                <li><strong>CartDao</strong> - Cart ops</li>
                <li><strong>MessageDao</strong> - Chat</li>
                <li><strong>ReviewDao</strong> - Reviews</li>
            </ul>
        </div>
        <div class="box box-yellow">
            <h3><span class="badge b-servlet">SERVLET</span> com.campushub.servlet</h3>
            <p class="small">Controllers handling HTTP requests. Process logic & forward to JSP.</p>
            <ul>
                <li><strong>Auth:</strong> Login, Register, Logout</li>
                <li><strong>Products:</strong> Product, Search, Category</li>
                <li><strong>Cart:</strong> Cart, Payment, Checkout</li>
                <li><strong>Orders:</strong> Order, SellerOrders</li>
                <li><strong>Seller:</strong> Listings, Add/Edit Product</li>
                <li><strong>User:</strong> Profile, Messages, Reviews</li>
            </ul>
        </div>
        <div class="box box-gray">
            <h3><span class="badge b-util">UTIL</span> com.campushub.util</h3>
            <p class="small">Helper utilities shared across application.</p>
            <ul>
                <li><strong>DatabaseHelper</strong></li>
                <li class="small">- getConnection()</li>
                <li class="small">- count(), sum()</li>
                <li class="small">DB: jdbc:derby://localhost:1527/campus_db</li>
            </ul>
        </div>
    </div>

    <!-- Complete Servlet-DAO-JSP Mapping -->
    <h2>üîó Complete Component Mapping (Servlet ‚Üí DAO ‚Üí JSP)</h2>
    <table>
        <tr>
            <th>Feature</th>
            <th>Servlet (URL)</th>
            <th>Uses DAO</th>
            <th>Forwards to JSP</th>
            <th>Description</th>
        </tr>
        <tr>
            <td rowspan="4"><strong>Auth</strong></td>
            <td>LoginServlet <code>/login</code></td>
            <td>UserDao</td>
            <td>login.jsp ‚Üí index.jsp</td>
            <td>User authentication</td>
        </tr>
        <tr>
            <td>RegisterServlet <code>/register</code></td>
            <td>UserDao</td>
            <td>register.jsp ‚Üí login.jsp</td>
            <td>New user registration</td>
        </tr>
        <tr>
            <td>ForgotPasswordServlet <code>/forgotPassword</code></td>
            <td>UserDao</td>
            <td>forgotPassword.jsp</td>
            <td>Password reset</td>
        </tr>
        <tr>
            <td>LogoutServlet <code>/logout</code></td>
            <td>-</td>
            <td>‚Üí login.jsp</td>
            <td>Session invalidation</td>
        </tr>
        <tr>
            <td rowspan="4"><strong>Products</strong></td>
            <td>ProductServlet <code>/products</code></td>
            <td>ProductDao, CategoryDao</td>
            <td>viewProducts.jsp</td>
            <td>List all/by category</td>
        </tr>
        <tr>
            <td>ProductDetailServlet <code>/product</code></td>
            <td>ProductDao</td>
            <td>productDetail.jsp</td>
            <td>Single product view</td>
        </tr>
        <tr>
            <td>SearchServlet <code>/search</code></td>
            <td>ProductDao</td>
            <td>searchResults.jsp</td>
            <td>Keyword search</td>
        </tr>
        <tr>
            <td>CategoryServlet <code>/categories</code></td>
            <td>CategoryDao</td>
            <td>categories.jsp</td>
            <td>Category listing</td>
        </tr>
        <tr>
            <td rowspan="3"><strong>Cart</strong></td>
            <td>CartServlet <code>/cart</code></td>
            <td>CartDao, ProductDao</td>
            <td>cartDetails.jsp</td>
            <td>View/modify cart</td>
        </tr>
        <tr>
            <td>PaymentServlet <code>/payment</code></td>
            <td>-</td>
            <td>payment.jsp ‚Üí paymentProcessing.jsp</td>
            <td>Payment selection</td>
        </tr>
        <tr>
            <td>CheckoutServlet <code>/checkout</code></td>
            <td>CartDao, OrderDao, ProductDao</td>
            <td>orderSuccess.jsp</td>
            <td>Complete purchase</td>
        </tr>
        <tr>
            <td rowspan="3"><strong>Orders</strong></td>
            <td>OrderServlet <code>/orders</code></td>
            <td>OrderDao</td>
            <td>orderDetails.jsp</td>
            <td>Buyer's orders</td>
        </tr>
        <tr>
            <td>OrderDetailServlet <code>/orderDetail</code></td>
            <td>OrderDao</td>
            <td>orderTracking.jsp</td>
            <td>Order tracking</td>
        </tr>
        <tr>
            <td>SellerOrdersServlet <code>/sellerOrders</code></td>
            <td>OrderDao</td>
            <td>sellerOrders.jsp</td>
            <td>Seller's orders to fulfill</td>
        </tr>
        <tr>
            <td rowspan="4"><strong>Seller</strong></td>
            <td>SellerListingsServlet <code>/sellerListings</code></td>
            <td>ProductDao</td>
            <td>sellerListings.jsp</td>
            <td>Seller dashboard</td>
        </tr>
        <tr>
            <td>AddProductServlet <code>/addProduct</code></td>
            <td>ProductDao, CategoryDao</td>
            <td>addProduct.jsp</td>
            <td>Create listing</td>
        </tr>
        <tr>
            <td>EditProductServlet <code>/editProduct</code></td>
            <td>ProductDao, CategoryDao</td>
            <td>editProduct.jsp</td>
            <td>Edit listing</td>
        </tr>
        <tr>
            <td>RemoveProductServlet <code>/removeProduct</code></td>
            <td>ProductDao</td>
            <td>‚Üí sellerListings</td>
            <td>Delete listing</td>
        </tr>
        <tr>
            <td rowspan="4"><strong>User</strong></td>
            <td>UserProfileServlet <code>/profile</code></td>
            <td>UserDao</td>
            <td>userProfile.jsp</td>
            <td>View profile</td>
        </tr>
        <tr>
            <td>EditProfileServlet <code>/editProfile</code></td>
            <td>UserDao</td>
            <td>editProfile.jsp</td>
            <td>Edit profile</td>
        </tr>
        <tr>
            <td>MessageServlet <code>/messages</code></td>
            <td>MessageDao</td>
            <td>messages.jsp</td>
            <td>Chat inbox</td>
        </tr>
        <tr>
            <td>ReviewServlet <code>/review</code></td>
            <td>ReviewDao</td>
            <td>review.jsp</td>
            <td>Seller reviews</td>
        </tr>
    </table>

    <!-- How They Connect -->
    <h2>üîÑ How Components Connect</h2>
    <div class="grid grid-2">
        <div class="box">
            <h3>1Ô∏è‚É£ Request Flow Example: View Products</h3>
            <ol>
                <li>User clicks "Products" ‚Üí <code>/products</code></li>
                <li><strong>ProductServlet.doGet()</strong> receives request</li>
                <li>Calls <strong>ProductDao.getAllProducts()</strong></li>
                <li>DAO executes SQL, returns List&lt;Product&gt;</li>
                <li>Servlet sets <code>request.setAttribute("products", list)</code></li>
                <li>Forwards to <strong>viewProducts.jsp</strong></li>
                <li>JSP uses JSTL <code>&lt;c:forEach&gt;</code> to display data</li>
            </ol>
        </div>
        <div class="box">
            <h3>2Ô∏è‚É£ Data Flow: Add to Cart</h3>
            <ol>
                <li>User clicks "Add to Cart" ‚Üí POST <code>/cart?action=add</code></li>
                <li><strong>CartServlet.doPost()</strong> checks action</li>
                <li>Calls <strong>CartDao.getOrCreateCart()</strong></li>
                <li>Calls <strong>CartDao.addToCart()</strong></li>
                <li>Redirects to <code>/cart</code> (GET)</li>
                <li><strong>CartServlet.doGet()</strong> loads cart</li>
                <li>Calls <strong>CartDao.getCartItems()</strong></li>
                <li>Forwards to <strong>cartDetails.jsp</strong></li>
            </ol>
        </div>
    </div>

    <!-- Database Schema -->
    <h2>üóÑÔ∏è Database Tables (Derby)</h2>
    <div class="grid grid-3">
        <div class="box box-gray">
            <strong>USERS</strong><br>
            <span class="small">user_id (PK), name, email, password, phone, profile_image, created_at</span>
        </div>
        <div class="box box-gray">
            <strong>PRODUCT</strong><br>
            <span class="small">product_id (PK), seller_id (FK), category_id (FK), name, description, price, condition, status, quantity, image_url</span>
        </div>
        <div class="box box-gray">
            <strong>CATEGORY</strong><br>
            <span class="small">category_id (PK), name, icon</span>
        </div>
        <div class="box box-gray">
            <strong>CART</strong><br>
            <span class="small">cart_id (PK), user_id (FK), created_at</span>
        </div>
        <div class="box box-gray">
            <strong>CART_ITEM</strong><br>
            <span class="small">cart_item_id (PK), cart_id (FK), product_id (FK), quantity</span>
        </div>
        <div class="box box-gray">
            <strong>ORDERS</strong><br>
            <span class="small">order_id (PK), product_id (FK), buyer_id (FK), seller_id (FK), quantity, total_amount, status, ordered_at</span>
        </div>
        <div class="box box-gray">
            <strong>MESSAGE</strong><br>
            <span class="small">message_id (PK), sender_id (FK), receiver_id (FK), product_id (FK), content, is_read, sent_at</span>
        </div>
        <div class="box box-gray">
            <strong>REVIEW</strong><br>
            <span class="small">review_id (PK), order_id (FK), reviewer_id (FK), seller_id (FK), rating, comment, created_at</span>
        </div>
    </div>

    <!-- Key Relationships -->
    <h2>üîë Key Relationships Summary</h2>
    <div class="grid grid-2">
        <div class="box">
            <h3>Bean ‚Üî DAO Relationship</h3>
            <ul>
                <li><strong>User.java</strong> ‚Üî <strong>UserDao.java</strong> - User data model & DB operations</li>
                <li><strong>Product.java</strong> ‚Üî <strong>ProductDao.java</strong> - Product CRUD</li>
                <li><strong>Cart.java + CartItem.java</strong> ‚Üî <strong>CartDao.java</strong> - Cart management</li>
                <li>Orders, Messages, Reviews use <code>Object[]</code> arrays instead of Beans</li>
            </ul>
        </div>
        <div class="box">
            <h3>Servlet ‚Üî JSP Naming Convention</h3>
            <ul>
                <li><strong>ProductServlet</strong> ‚Üí <strong>viewProducts.jsp</strong> (list view)</li>
                <li><strong>CartServlet</strong> ‚Üí <strong>cartDetails.jsp</strong></li>
                <li><strong>OrderServlet</strong> ‚Üí <strong>orderDetails.jsp</strong></li>
                <li><strong>*Servlet</strong> typically forwards to <strong>*.jsp</strong> with same theme</li>
            </ul>
        </div>
    </div>

    <div style="margin-top: 15px; padding-top: 10px; border-top: 1px solid #e5e7eb; text-align: center;">
        <p class="small"><strong>CampusHub</strong> | CSC584 Enterprise Web Development | Group Project 2026</p>
        <p class="small">Technology: Java EE 8 ‚Ä¢ JSP/JSTL ‚Ä¢ Apache Derby ‚Ä¢ GlassFish 5 ‚Ä¢ Tailwind CSS</p>
    </div>
</body>
</html>
